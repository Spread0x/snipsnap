version: '3.6'
services:
  postgres:
    image: postgres:12
    restart: always
    ports:
      - 8433:5432
    volumes:
      - ./tmp/db:/var/lib/postgresql/data
    environment:
      POSTGRES_PASSWORD: postgrespassword
  graphql-engine:
    image: hasura/graphql-engine:v1.3.3
    ports:
      - '3010:8080'
    depends_on:
      - 'postgres'
    restart: always
    environment:
      HASURA_GRAPHQL_DATABASE_URL: postgres://postgres:postgrespassword@postgres:5432/postgres
      HASURA_GRAPHQL_ENABLE_CONSOLE: 'false'
      HASURA_GRAPHQL_ENABLED_LOG_TYPES: startup, http-log, webhook-log, websocket-log, query-log
      HASURA_GRAPHQL_ADMIN_SECRET: myadminsecretkey
      HASURA_GRAPHQL_UNAUTHORIZED_ROLE: guest
      HASURA_GRAPHQL_JWT_SECRET: '{"type":"HS512","key":"Ri-PlQA7jjvTL15WZ8_THrXWTccUC6e3tJxfJXdlBkwrLoGGP0LFSTe_7bdBAZgnFOwXmb5KVqYI2YaaxpSZsYNC6CFVMbp-odjB7AMroAFJ6igMcnayZv0IdMncp5-dqJiyv69Fw-iu5Z0-yCgReNmwPSV4CDW6YT-tTXpsZfIX4YTmvoPpdB3bq7Ynx0kEGoz81zO_k-84x73MLGmDeNlsTHamhqwjljtL8NonjvdvB1uPEJGXwuZjl1wgXBbd_p7YhBMqyQTbi0FNZlYwHY_o-DRkiABb1mZlkpf1YDZAsdfC0m6xkrPRvjguo01_rjNYw5dB-HNnUd8FBof7dCmlDSjZslPaUS-xQeLvq04Sam74UVyQva1Z0z-2V3wQ1bIU2LFBI6ggy9QB7sO5q30AQOrYZAhKN5QJMlAxup214_lCjE2K7v1bpb0ue7m_WIciCCbHZcp23IE9rVJdzPV9Wygs1nz5tkIPEYvGGkBzpb-k3kijTuE8ucw-L4zpJSrqr9THqzyZGBpodqXnT5oqAIWLIOVU5YwIrCetjAKjxxAEGuM54OZG3eecOcscV9j0CtQq0zFyfsijy5q_3EO-hpBP5wFO6X6wpyg9vDITWLHB-N0Z3jcf82eqcHzWZGDIxVzy0fH3cAv6WaGsDt_qauV97zyD3_oKRoXfssM"}'
